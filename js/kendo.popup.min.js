/*
* Kendo UI v2011.3.1407 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){function E(b,c){return b===c||a.contains(b,c)}var c=window.kendo,d=c.ui,e=c.support.touch,f=c.getOffset,g="open",h="close",i="center",j="left",k="right",l="top",m="bottom",n="absolute",o="hidden",p="body",q="location",r="position",s="visible",t="fitted",u="effects",v="k-state-active",w="k-state-border",x=".k-picker-wrap, .k-dropdown-wrap, .k-link",y=e?"touchstart":"mousedown",z=c.support.transitions.css,A=z+"transform",B=a.extend,C=a.proxy,D=d.Widget,F=D.extend({init:function(b,d){var f=this;D.fn.init.call(f,b,d),d=f.options,f.collisions=f.options.collision.split(" "),f.collisions.length===1&&f.collisions.push(f.collisions[0]),f.element.hide().addClass("k-popup k-group k-reset").css({position:n}).appendTo(a(d.appendTo)).bind("mouseenter mouseleave",function(a){f._hovered=a.type==="mouseenter"}),f.wrapper=a(),d.animation===!1&&(d.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),u in d.animation.close||(d.animation.close=B({reverse:!0},d.animation.open,d.animation.close)),B(d.animation.open,{complete:function(){f.wrapper.css({overflow:s})}}),B(d.animation.close,{complete:function(){f.wrapper.hide();var b=f.wrapper.data(q),e=a(d.anchor),g,h;b&&f.wrapper.css(b),d.anchor!=p&&(g=e.hasClass(w+"-down")?"down":"up",h=w+"-"+g,e.removeClass(h).children(x).removeClass(v).removeClass(h),f.element.removeClass(w+"-"+c.directions[g].reverse)),f._closing=!1}}),f.bind([g,h],d),a(document.documentElement).bind(y,C(f._mousedown,f)),e||a(window).bind("resize scroll",function(){f._hovered||f.close()}),d.toggleTarget&&a(d.toggleTarget).bind(d.toggleEvent,C(f.toggle,f))},options:{name:"Popup",toggleEvent:"click",origin:m+" "+j,position:l+" "+j,anchor:p,appendTo:p,collision:"flip fit",animation:{open:{effects:"slideIn:down",transition:!/chrome/i.test(navigator.userAgent),duration:200,show:!0},close:{duration:100,show:!1,hide:!0}}},open:function(){var b=this,d=b.element,e=b.options,f="down",h,i,j=a(e.anchor);if(!b.visible()){if(d.data("animating")||b.trigger(g))return;b.wrapper=i=c.wrap(d).css({overflow:o,display:"block",position:n}),c.support.mobileOS.android&&i.add(j).css(A,"translatez(0)"),i.css(r),e.appendTo==p&&i.css(l,"-10000px"),h=B({},e.animation.open),b._update()&&(typeof h.effects=="string"&&h.effects.match(f)&&(f="up"),h.effects=c.parseEffects(h.effects,!0));if(e.anchor!=p){var k=w+"-"+f;d.addClass(w+"-"+c.directions[f].reverse),j.addClass(k).children(x).addClass(v).addClass(k)}d.data(u,h.effects).kendoStop(!0).kendoAnimate(h)}},toggle:function(){var a=this;a[a.visible()?h:g]()},visible:function(){return this.element.is(":"+s)},close:function(){var a=this,b=a.options,d,e;if(a.visible()){if(a._closing||a.trigger(h))return;d=B({},b.animation.close),e=a.element.data(u),a.wrapper=c.wrap(a.element).css({overflow:o}),e&&(d.effects=e),a._closing=!0,a.element.kendoStop(!0).kendoAnimate(d)}},_mousedown:function(b){var d=this,e=d.element[0],f=d.options,g=a(f.anchor)[0],h=f.toggleTarget,i=c.eventTarget(b),j=a(i).closest(".k-popup")[0];(!j||j===d.element[0])&&!E(e,i)&&!E(g,i)&&(!h||!E(a(h)[0],i))&&d.close()},_update:function(){return this._position(a(window))},_fit:function(a,b,c){var d=0;a+b>c&&(d=c-(a+b)),a<0&&(d=a);return d},_flip:function(a,b,c,d,e,f,g){var h=0;g=g||b,f!==e&&f!==i&&e!==i&&(a+g>d&&(h+=-(c+b)),a+h<0&&(h+=c+b));return h},_position:function(b){var d=this,e=d.element,g=d.wrapper,h=d.options,i=a(h.anchor),j=h.origin.toLowerCase().split(" "),k=h.position.toLowerCase().split(" "),l=d.collisions,m=!1,n=c.support.zoomLevel(),o=10002,p=i.parents().filter(g.siblings());if(p[0]){var s=Number(a(p).css("zIndex"));s&&(o=s+1)}g.css("zIndex",o),h.appendTo===F.fn.options.appendTo?g.css(d._align(j,k)):g.css(d._align(j,k,!0));var u=f(g,r),v=f(g),w=i.offsetParent().parent(".k-animation-container");w.length&&w.data(t)&&(u=f(g,r),v=f(g)),v={top:v.top-(window.pageYOffset||document.documentElement.scrollTop||0),left:v.left-(window.pageXOffset||document.documentElement.scrollLeft||0)},d.wrapper.data(q)||g.data(q,B({},u));var x=B({},v),y=B({},u);l[0]==="fit"&&(y.top+=d._fit(x.top,g.outerHeight(),b.height()/n)),l[1]==="fit"&&(y.left+=d._fit(x.left,g.outerWidth(),b.width()/n)),y.left!=u.left||y.top!=u.top?g.data(t,!0):g.removeData(t);var z=B({},y);l[0]==="flip"&&(y.top+=d._flip(x.top,e.outerHeight(),i.outerHeight(),b.height()/n,j[0],k[0],g.outerHeight())),l[1]==="flip"&&(y.left+=d._flip(x.left,e.outerWidth(),i.outerWidth(),b.width()/n,j[1],k[1],g.outerWidth())),g.css(y);return y.left!=z.left||y.top!=z.top},_align:function(b,c,d){var e=this,g=e.wrapper,h=a(e.options.anchor),n=b[0],o=b[1],p=c[0],q=c[1],r=d?{top:0,left:0}:f(h),s=g.outerWidth(),t=g.outerHeight(),u=h.outerWidth(),v=h.outerHeight(),w=r.top,x=r.left,y=Math.round,z=n!==p,A=o!==q;n===l&&d&&z&&(w-=t),n===m&&!d&&(w+=v),n===i&&(w+=y(v/2)),p===l&&d&&z&&(w+=v),p===m&&!d&&(w-=t),p===i&&(w-=y(t/2)),o===j&&d&&A&&(x-=s),o===k&&!d&&(x+=u),o===i&&(x+=y(u/2)),q===j&&d&&A&&(x+=u),q===k&&!d&&(x-=s),q===i&&(x-=y(s/2));return{top:w,left:x}}});d.plugin(F)})(jQuery)