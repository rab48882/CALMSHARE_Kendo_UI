/*
* Kendo UI v2011.3.1407 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){function s(b,c){return b===c||a.contains(b,c)}var c=window.kendo,d=c.ui,e=d.Widget,f=c.keys,g=c.support.touch,h="id",i="li",j=g?"touchend":"click",k="change",l="character",m="k-state-focused",n="k-state-hover",o="k-loading",p="kendoMobileScroller",q="select",r=a.proxy,t=e.extend({init:function(b,c){var d=this,f,k;e.fn.init.call(d,b,c),d._template(),d.ul=a('<ul class="k-list k-reset"/>').css({overflow:"auto"}).delegate(i,"mouseenter",function(){a(this).addClass(n)}).delegate(i,"mouseleave",function(){a(this).removeClass(n)}),d.list=k=a("<div class='k-list-container'/>").append(d.ul).mousedown(function(){d._clearBlurTimeout()}).delegate(i,j,r(d._click,d)),f=d.element.attr(h),f&&k.attr(h,f+"-list"),g&&k[p]&&k[p](),a(document.documentElement).bind("mousedown",r(d._mousedown,d))},current:function(a){var c=this;if(a!==b)c._current&&c._current.removeClass(m),a?(a.addClass(m),c._scroll(a[0])):c._selected=a,c._current=a;else return c._current},_accessors:function(){var a=this,b=a.element,d=a.options,e=c.getter,f=b.attr(c.attr("text-field")),g=b.attr(c.attr("value-field"));f&&(d.dataTextField=f),g&&(d.dataValueField=g),a._text=e(d.dataTextField),a._value=e(d.dataValueField)},_blur:function(){var a=this;a._change(),a.close()},_clearBlurTimeout:function(){var a=this;setTimeout(function(){clearTimeout(a._bluring),a._focused.focus()})},_change:function(){var a=this,b=a.value();b!==a._old&&(a.trigger(k),a.element.trigger(k),a._old=b)},_click:function(b){this._accept(a(b.currentTarget))},_enable:function(){var a=this,b=a.options;a.element.prop("disabled")&&(b.enable=!1),a.enable(b.enable)},_focus:function(a){var b=this;b.select(a),b._blur(),b._focused[0]!==document.activeElement&&b._focused.focus()},_height:function(a){if(a){var b=this,c=b.list,d=b.popup.visible(),e=b.options.height;c=c.add(c.parent(".k-animation-container")).show().height(b.ul[0].scrollHeight>e?e:"auto"),d||c.hide()}},_popup:function(){var b=this,c=b.list,e=b.options,f=b.wrapper,g=window.getComputedStyle?window.getComputedStyle(f[0],null):0,h=g?parseFloat(g.width):f.outerWidth(),i;g&&(a.browser.mozilla||a.browser.msie)&&(h+=parseFloat(g.paddingLeft)+parseFloat(g.paddingRight)+parseFloat(g.borderLeftWidth)+parseFloat(g.borderRightWidth)),b.popup=new d.Popup(c,{anchor:f,open:e.open,close:e.close,animation:e.animation}),i=h-(c.outerWidth()-c.width()),c.css({fontFamily:f.css("font-family"),width:i})},_toggleHover:function(b){c.support.touch||a(b.currentTarget).toggleClass(n,b.type==="mouseenter")},_toggle:function(a){var c=this;a=a!==b?a:!c.popup.visible(),c[a?"open":"close"]()},_scroll:function(a){if(!!a){var b=this.ul[0],c=a.offsetTop,d=a.offsetHeight,e=b.scrollTop,f=b.clientHeight,g=c+d;b.scrollTop=e>c?c:g>e+f?g-f:e}},_template:function(){var a=this,b=a.options,d=b.template,e=b.dataTextField||"";d?(d=c.template(d),a.template=function(a){return"<li class='k-item' unselectable='on'>"+d(a)+"</li>"}):a.template=c.template("<li class='k-item' unselectable='on'>${data"+(e?".":"")+e+"}</li>",{useWithBlock:!1})}});a.extend(t,{caret:function(a){var b,c=a.ownerDocument.selection;c?b=Math.abs(c.createRange().moveStart(l,-a.value.length)):b=a.selectionStart;return b},selectText:function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveStart(l,b),d.moveEnd(l,c-b),d.select()}else a.setSelectionRange(b,c)},inArray:function(a,b){var c=-1;if(!a||a.parentNode!==b)return c;c=0;while(a=a.previousSibling)c++;return c}}),c.ui.List=t,d.Select=t.extend({init:function(a,b){t.fn.init.call(this,a,b)},close:function(){this.popup.close()},_accessor:function(a,c){var d=this.element,e=d.is(q),f,g;d=d[0];if(a===b){e?(g=d.selectedIndex,f=g>-1?d.options[g]:null,a=f?f.value||f.text:""):a=d.value;return a}e?d.selectedIndex=c:d.value=a},_hideBusy:function(){var a=this;clearTimeout(a._busy),a._arrow.removeClass(o)},_showBusy:function(){var a=this;a._busy||(a._busy=setTimeout(function(){a._arrow.addClass(o)},100))},_data:function(){return this.dataSource.view()},_dataSource:function(){var b=this,d,e=b.element,f=b.options,g=f.dataSource||{};g=a.isArray(g)?{data:g}:g,b.element.is(q)&&(d=e.children(":selected"),d[0]&&(f.index=d.index()),g.select=e,g.fields=[{field:f.dataTextField},{field:f.dataValueField}]),b.dataSource=c.data.DataSource.create(g).bind(k,r(b.refresh,b)).bind("requestStart",r(b._showBusy,b))},_index:function(a){var c=this,d,e,f=c._data(),g;for(d=0,e=f.length;d<e;d++){g=c._value(f[d]),g===b&&(g=c._text(f[d]));if(g==a)return d}return-1},_get:function(b){var c=this,d,e=c._data(),f;if(typeof b=="function")for(d=0,f=e.length;d<f;d++)if(b(e[d])){b=d;break}d=-1;if(typeof b=="number"){if(b<0)return a();b=a(c.ul[0].childNodes[b])}b&&b.nodeType&&(b=a(b));return b},_move:function(a){var b=this,c=a.keyCode,d=b.ul[0],e=b._current,g=c===f.DOWN,h;c===f.UP||g?(a.altKey?b.toggle(g):g?(b.select(e?e[0].nextSibling:d.firstChild),a.preventDefault()):(b.select(e?e[0].previousSibling:d.lastChild),a.preventDefault()),h=!0):c===f.ENTER||c===f.TAB?(b.popup.visible()&&a.preventDefault(),b._accept(e),h=!0):c===f.ESC&&(b.close(),h=!0);return h},_options:function(a){var c=this,d=c.element,e=d[0].selectedIndex,f=c.value(),g=a.length,h="",i,j,k,l,m;for(m=0;m<g;m++){i="<option",j=a[m],k=c._text(j),l=c._value(j);if(l||l===0)i+=' value="'+l+'"';i+=">",k!==b&&(i+=k),i+="</option>",h+=i}d.html(h),d[0].selectedIndex=e},_reset:function(){var a=this,b=a.element;b.closest("form").bind("reset",function(){setTimeout(function(){a.value(b[0].value)})})}})})(jQuery)